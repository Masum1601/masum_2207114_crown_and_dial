<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.VBox?>

<BorderPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.example.final_project_114.OrderHistoryController"
            style="-fx-background-color: #f8f9fa;">

    <!-- ================= TOP BAR ================= -->
    <top>
        <HBox spacing="20" alignment="CENTER_LEFT"
              style="-fx-background-color: #1a1a2e; -fx-padding: 18;">

            <Label text="ðŸ“¦ Order History"
                   style="-fx-text-fill: #1e90ff;
                          -fx-font-size: 28px;
                          -fx-font-weight: bold;"/>

            <Region HBox.hgrow="ALWAYS"/>

            <Label fx:id="userLabel"
                   text="Hello, User"
                   style="-fx-text-fill: white;
                          -fx-font-size: 16px;
                          -fx-font-weight: bold;
                          -fx-padding: 5 10;"/>

            <Button text="ðŸ  Back to Store"
                    onAction="#handleBack"
                    style="-fx-background-color: #2563eb;
                           -fx-text-fill: white;
                           -fx-cursor: hand;
                           -fx-padding: 10 20;
                           -fx-background-radius: 25;
                           -fx-font-weight: bold;"/>

            <Button text="ðŸšª Logout"
                    onAction="#handleLogout"
                    style="-fx-background-color: #2c3e50;
                           -fx-text-fill: white;
                           -fx-cursor: hand;
                           -fx-padding: 10 20;
                           -fx-background-radius: 25;
                           -fx-font-weight: bold;"/>
        </HBox>
    </top>

    <!-- ================= CENTER CONTENT ================= -->
    <center>
        <VBox spacing="25" style="-fx-padding: 25;">

            <!-- ===== Statistics Panel ===== -->
            <HBox spacing="30" alignment="CENTER">

                <VBox spacing="8" alignment="CENTER"
                      prefWidth="220"
                      style="-fx-background-color: white;
                             -fx-padding: 30;
                             -fx-background-radius: 12;
                             -fx-border-color: #2563eb;
                             -fx-border-width: 1;
                             -fx-border-radius: 12;">

                    <Label text="Total Orders"
                           style="-fx-font-size: 14px;
                                  -fx-text-fill: #6c757d;
                                  -fx-font-weight: bold;"/>

                    <Label fx:id="totalOrdersLabel"
                           text="0"
                           style="-fx-font-size: 38px;
                                  -fx-font-weight: bold;
                                  -fx-text-fill: #1a1a2e;"/>
                </VBox>

                <VBox spacing="8" alignment="CENTER"
                      prefWidth="220"
                      style="-fx-background-color: white;
                             -fx-padding: 30;
                             -fx-background-radius: 12;
                             -fx-border-color: #2563eb;
                             -fx-border-width: 1;
                             -fx-border-radius: 12;">

                    <Label text="Total Spent"
                           style="-fx-font-size: 14px;
                                  -fx-text-fill: #6c757d;
                                  -fx-font-weight: bold;"/>

                    <Label fx:id="totalSpentLabel"
                           text="0.00"
                           style="-fx-font-size: 38px;
                                  -fx-font-weight: bold;
                                  -fx-text-fill: #2563eb;"/>
                </VBox>

            </HBox>

            <!-- ===== Orders Table ===== -->
            <VBox spacing="15" VBox.vgrow="ALWAYS"
                  style="-fx-background-color: white;
                         -fx-padding: 25;
                         -fx-background-radius: 12;
                         -fx-border-color: #2563eb;
                         -fx-border-width: 1;
                         -fx-border-radius: 12;">

                <Label text="Your Orders"
                       style="-fx-font-size: 24px;
                              -fx-font-weight: bold;
                              -fx-text-fill: #2c3e50;"/>

                <TableView fx:id="ordersTable" VBox.vgrow="ALWAYS">
                    <columns>
                        <TableColumn fx:id="orderIdColumn" text="Order #" prefWidth="100"/>
                        <TableColumn fx:id="orderDateColumn" text="Date" prefWidth="180"/>
                        <TableColumn fx:id="totalColumn" text="Total" prefWidth="120"/>
                        <TableColumn fx:id="statusColumn" text="Status" prefWidth="120"/>
                        <TableColumn fx:id="actionsColumn" text="Actions" prefWidth="150"/>
                    </columns>

                    <columnResizePolicy>
                        <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
                    </columnResizePolicy>
                </TableView>

            </VBox>
        </VBox>
    </center>

</BorderPane>
